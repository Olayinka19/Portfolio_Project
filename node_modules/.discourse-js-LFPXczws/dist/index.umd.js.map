{"version":3,"file":"index.umd.js","sources":["../node_modules/tslib/tslib.es6.js","../src/utils.ts","../src/resources/Categories.ts","../src/resources/Groups.ts","../src/resources/Messages.ts","../src/resources/Notifications.ts","../src/types/Posts.ts","../src/resources/Posts.ts","../src/resources/Preferences.ts","../src/resources/Topics.ts","../src/resources/Uploads.ts","../src/resources/Users.ts","../node_modules/humps/humps.js","../src/types/Notifications.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export const createBody = (\n  params: Record<string, string | number | Blob>,\n): FormData => {\n  const form = new FormData();\n\n  Object.keys(params).forEach(paramKey => {\n    const paramValue = params[paramKey];\n\n    if (paramValue instanceof Array) {\n      paramValue.forEach(param => {\n        form.append(`${paramKey}[]`, param);\n      });\n    } else if (typeof paramValue === 'number') {\n      form.append(paramKey, paramValue.toString());\n    } else {\n      form.append(paramKey, paramValue);\n    }\n  });\n  return form;\n};\n\nexport const buildQueryString = (\n  uri: string,\n  params: Record<string, string | number | boolean>,\n): string => {\n  const queryString = Object.keys(params)\n    .map(key => {\n      const value = params[key];\n\n      if (Array.isArray(value)) {\n        return value.map(sub => `${key}[]=${sub}`).join('&');\n      }\n\n      return `${key}=${params[key]}`;\n    })\n    .join('&');\n\n  const separator = !!queryString ? (uri.indexOf('?') !== -1 ? '&' : '?') : '';\n  return `${uri}${separator}${queryString}`;\n};\n\nexport class ApiError extends Error {\n  status: number;\n  statusText: string;\n  error: string;\n\n  constructor(\n    status: number,\n    statusText: string,\n    error: string,\n    errorArray = [],\n  ) {\n    super();\n    const errorMessage = error || errorArray.join(', ');\n\n    this.name = 'ApiError';\n    this.status = status;\n    this.statusText = statusText;\n    this.message = `${status} - ${statusText || errorMessage}`;\n    this.error = errorMessage;\n  }\n}\n","import Discourse from '../index';\nimport { buildQueryString } from '../utils';\nimport { Category } from '../types/Categories';\n\nexport type CategoryParams = {\n  cat_id?: number;\n  subcat_id?: number;\n  latest: boolean;\n};\n\nexport interface ICategories {\n  getCategory(params: CategoryParams): Promise<Category>;\n  getSubcategory(params: CategoryParams): Promise<Category>;\n}\n\nexport default function Categories(discourse: Discourse): void {\n  this.getCategory = async (\n    { cat_id, latest, ...inputs }: CategoryParams = {\n      latest: false,\n    },\n  ) => {\n    if (!cat_id) {\n      throw new Error(\n        'No id defined. You must pass an `cat_id` to the getCategory function.',\n      );\n    }\n\n    return discourse.get({\n      path: buildQueryString(\n        `c/${cat_id}${latest ? '/l/latest' : ''}.json`,\n        inputs as CategoryParams,\n      ),\n    });\n  };\n\n  this.getSubcategory = async (\n    { cat_id, subcat_id, latest, ...inputs }: CategoryParams = {\n      latest: false,\n    },\n  ) => {\n    if (!cat_id || !subcat_id) {\n      throw new Error(\n        'No id defined. You must pass an id to the getSubcategory function.',\n      );\n    }\n\n    return discourse.get({\n      path: buildQueryString(\n        `c/${cat_id}/${subcat_id}${latest ? '/l/latest' : ''}.json`,\n        inputs as CategoryParams,\n      ),\n    });\n  };\n}\n","import Discourse from '../index';\nimport { GroupMemberList } from '../types/Groups';\n\nexport interface IGroups {\n  getMembers(params: { group_name: string }): Promise<GroupMemberList>;\n}\n\nexport default function Groups(discourse: Discourse): void {\n  this.getMembers = async ({ group_name }: { group_name: string }) => {\n    return discourse.get({\n      path: `groups/${group_name}/members.json`,\n    });\n  };\n}\n","import Discourse from '../index';\nimport { PrivateMessageList } from '../types/Messages';\nimport { Post } from '../types/Posts';\n\nexport interface SendMessageBody {\n  topic_id: number;\n  raw: string;\n  [key: string]: string | number;\n}\n\nexport interface IMessages {\n  get(): Promise<PrivateMessageList>;\n  getGroupMessages(params: { group_name: string }): Promise<PrivateMessageList>;\n  getSentMessages(): Promise<PrivateMessageList>;\n  getAllMessages(): Promise<[PrivateMessageList, PrivateMessageList]>;\n  send(inputs: SendMessageBody): Promise<Post>;\n}\n\nexport default function Messages(discourse: Discourse): void {\n  this.get = async () => {\n    return discourse.get({\n      path: `topics/private-messages/${discourse._API_USERNAME}.json`,\n    });\n  };\n\n  this.getGroupMessages = async ({ group_name }: { group_name: string }) => {\n    return discourse.get({\n      path: `topics/private-messages-group/${discourse._API_USERNAME}/${group_name}.json`,\n      headers: {\n        Accept: 'application/json',\n      },\n    });\n  };\n\n  this.getSentMessages = async () => {\n    return discourse.get({\n      path: `topics/private-messages-sent/${discourse._API_USERNAME}.json`,\n    });\n  };\n\n  this.getAllMessages = async () => {\n    const getMessages = this.get();\n    const getSentMessages = this.getSentMessages();\n\n    return Promise.all([getMessages, getSentMessages]);\n  };\n\n  this.send = async (inputs: Partial<SendMessageBody> = {}) => {\n    return discourse.post({\n      path: 'posts',\n      body: inputs,\n    });\n  };\n}\n","import Discourse from '../index';\nimport { buildQueryString } from '../utils';\nimport { NotificationList, MarkNotificationRead } from '../types/Notifications';\n\nexport type NotificationParams = {\n  recent?: boolean;\n  limit?: number;\n  offset?: number;\n  // TODO: Pull out common params into a base type\n  username?: string;\n};\n\nexport interface INotifications {\n  get(inputs?: NotificationParams): Promise<NotificationList>;\n  markRead(params: { id: number }): Promise<MarkNotificationRead>;\n}\n\nexport default function Notifications(discourse: Discourse): void {\n  this.get = async (inputs: NotificationParams = {}) => {\n    return discourse.get({\n      method: 'GET',\n      path: buildQueryString(\n        'notifications.json',\n        inputs as NotificationParams,\n      ),\n    });\n  };\n\n  this.markRead = async ({ id }: { id: number }) => {\n    return discourse.put({\n      path: 'notifications/mark-read',\n      ...(id\n        ? {\n            body: {\n              id,\n            },\n          }\n        : {}),\n    });\n  };\n}\n","export enum PostActions {\n  Bookmark = 1,\n  Like,\n  OffTopic,\n  Inappropriate,\n  _, // Not used\n  NotifyUser,\n  NotifyModerators,\n  Spam,\n}\n\nexport type PostActionType = 1 | 2 | 3 | 4 | 6 | 7 | 8;\n\nexport interface Post {\n  id: number;\n  name: string;\n  username: string;\n  avatarTemplate: string;\n  createdAt: string;\n  cooked: string;\n  postNumber: number;\n  postType: number;\n  updatedAt: string;\n  replyCount: number;\n  replyToPostNumber: number | null;\n  quoteCount: number;\n  avgTime?: number;\n  incomingLinkCount: number;\n  reads: number;\n  readersCount: number;\n  score: number;\n  yours: boolean;\n  topicId: number;\n  topicSlug: string;\n  displayUsername: string;\n  primaryGroupName: string | null;\n  primaryGroupFlairUrl: string | null;\n  primaryGroupFlairColor: string | null;\n  primaryGroupFlairBgColor: string | null;\n  version: number;\n  canEdit: boolean;\n  canDelete: boolean;\n  canRecover: boolean;\n  canWiki: boolean;\n  read: boolean;\n  userTitle: string | null;\n  actionsSummary: Array<{\n    id: number;\n    canAct: boolean;\n    hidden?: boolean;\n    acted?: boolean;\n    canUndo?: boolean;\n    count?: number;\n  }>;\n  moderator: boolean;\n  admin: boolean;\n  staff: boolean;\n  userId: number;\n  hidden: boolean;\n  hiddenReasonId?: number | string;\n  trustLevel: number;\n  deletedAt: string | null;\n  userDeleted: boolean;\n  editReason: string | null;\n  canViewEditHistory: boolean;\n  wiki: boolean;\n  reviewableId?: number;\n  reviewableScoreCount?: number;\n  reviewableScorePendingCount?: number;\n  polls?: {\n    poll: {\n      options: Array<{\n        id: string;\n        html: string;\n        votes: number;\n      }>;\n      voters: number;\n      status: string;\n      name: string;\n      type: string;\n    };\n  };\n  pollsVotes?: {\n    poll: [string];\n  };\n}\n","import Discourse from '../index';\nimport { Post, PostActions, PostActionType } from '../types/Posts';\n\nexport interface CreatePostBody {\n  // TODO: Add strict type\n  [key: string]: any;\n}\n\nexport interface PostActionBody {\n  id?: number;\n  message?: string;\n  flag_topc?: boolean;\n  post_action_type_id: PostActionType;\n}\n\nexport interface IPosts {\n  create(inputs: CreatePostBody): Promise<Post>;\n  reply(params: {\n    topic_id: number;\n    raw: string;\n    reply_to_post_number: number;\n  }): Promise<Post>;\n  postAction(params: {\n    method: string;\n    body: PostActionBody;\n    id: number | null;\n  }): Promise<Post>;\n  like(params: { id: number }): Promise<Post>;\n  unlike(params: { id: number }): Promise<Post>;\n  flag(params: {\n    id: number;\n    post_action_type_id: number;\n    message: string;\n    flag_topic: boolean;\n  }): Promise<Post>;\n}\n\nexport default function Posts(discourse: Discourse): void {\n  this.create = async (inputs: Partial<CreatePostBody> = {}) => {\n    // If an imageUri has been passed, upload the image first.\n    if (inputs.imageUri) {\n      const { url, width, height, shortUrl } = await discourse.uploads.create({\n        'files[]': {\n          uri: inputs.imageUri,\n          name: 'photo.jpeg',\n          type: 'image/jpeg',\n        },\n        type: 'composer',\n        synchronous: true,\n      });\n\n      if (url) {\n        const body: { [key: string]: string } = {};\n\n        // Remove the imageUri from the inputs as it's not used in the next request.\n        delete inputs.imageUri;\n\n        Object.keys(inputs).forEach(key => (body[key] = inputs[key]));\n\n        // Prepend the raw message with the image.\n        body.raw = `![${width}x${height}](${shortUrl})\\n${body.raw}`;\n\n        return discourse.post({\n          path: 'posts',\n          body,\n        });\n      }\n    } else {\n      return discourse.post({\n        path: 'posts',\n        body: inputs,\n      });\n    }\n  };\n\n  this.reply = async ({\n    topic_id,\n    raw,\n    reply_to_post_number,\n  }: {\n    topic_id: number;\n    raw: string;\n    reply_to_post_number: number;\n  }) => {\n    if (!topic_id) {\n      throw new Error(\n        'No topic_id defined. You must pass a topic to reply function.',\n      );\n    }\n\n    return discourse.post({\n      path: 'posts',\n      body: {\n        topic_id,\n        raw,\n        reply_to_post_number,\n        archetype: 'regular',\n        nested_post: true,\n      },\n    });\n  };\n\n  /**\n   * post_action_type_id values\n   * 1: bookmark\n   * 2: like\n   * 3: flag - off topic\n   * 4: flag - inappropriate\n   * 8: flag - spam\n   * 6: flag - notify user\n   * 7: flag - notify moderators\n   */\n  this.postAction = async ({\n    method = 'post',\n    body,\n    id = null,\n  }: {\n    method: string;\n    body: PostActionBody;\n    id: number | null;\n  }) => {\n    return discourse[method]({\n      path: id ? `post_actions/${id}` : 'post_actions',\n      body,\n    });\n  };\n\n  this.like = ({ id }: { id: number }) =>\n    this.postAction({ body: { id, post_action_type_id: PostActions.Like } });\n\n  this.unlike = ({ id }: { id: number }) =>\n    this.postAction({\n      method: 'delete',\n      body: { post_action_type_id: PostActions.Like },\n      id,\n    });\n\n  this.flag = ({\n    id,\n    post_action_type_id,\n    message,\n    flag_topic,\n  }: {\n    id: number;\n    post_action_type_id: PostActionType;\n    message: string;\n    flag_topic: boolean;\n  }) =>\n    this.postAction({ body: { id, post_action_type_id, message, flag_topic } });\n}\n","import Discourse from '../index';\n\nexport interface IPreferences {\n  pickAvatar(params: { username?: string; upload_id?: number }): Promise<null>;\n}\n\nexport default function Preferences(discourse: Discourse): void {\n  this.pickAvatar = async ({\n    username,\n    upload_id,\n  }: { username?: string; upload_id?: number } = {}) => {\n    return discourse.put({\n      path: `u/${username}/preferences/avatar/pick`,\n      body: {\n        upload_id,\n        type: 'uploaded',\n      },\n    });\n  };\n}\n","import Discourse from '../index';\nimport { buildQueryString } from '../utils';\nimport {\n  Topic,\n  TopicPosts,\n  TopicByUserName,\n  TopicByTag,\n  TopicByCategoryAndTag,\n} from '../types/Topics';\nimport { Post } from '../types/Posts';\n\nexport type TopicParams = {\n  id?: number;\n  reverse?: boolean;\n  // TODO: Add strict type\n  posts?: any;\n  username?: string;\n  // By Tag\n  tag?: string;\n  // By Category\n  category?: number;\n  subcategory?: number;\n};\n\nexport interface ITopics {\n  getTopic(params: TopicParams): Promise<Topic>;\n  getTopicPosts(params: TopicParams): Promise<TopicPosts>;\n  getTopicsByUsername(params: TopicParams): Promise<TopicByUserName>;\n  getTopicsByTag(params: TopicParams): Promise<TopicByTag>;\n  getTopicsByCategoryAndTag(\n    params: TopicParams,\n  ): Promise<TopicByCategoryAndTag>;\n  deleteTopic(params: TopicParams): Promise<string>;\n  createTopic(params: TopicParams): Promise<Post>;\n}\n\nexport default function Topics(discourse: Discourse): void {\n  this.getTopic = async ({ id, reverse, ...inputs }: TopicParams = {}) => {\n    return discourse.get({\n      path: buildQueryString(\n        `t/${id}${reverse ? '/last' : ''}.json`,\n        inputs as TopicParams,\n      ),\n    });\n  };\n\n  this.getTopicPosts = async ({ id, posts, ...inputs }: TopicParams = {}) => {\n    const params = {\n      post_ids: posts,\n      ...inputs,\n    };\n\n    return discourse.get({\n      path: buildQueryString(`t/${id}/posts.json`, params),\n    });\n  };\n\n  this.getTopicsByUsername = async ({ username, ...inputs }: TopicParams) => {\n    return discourse.get({\n      path: buildQueryString(\n        `topics/created-by/${username}.json`,\n        inputs as TopicParams,\n      ),\n    });\n  };\n\n  this.getTopicsByTag = async ({ tag, ...inputs }: TopicParams = {}) => {\n    return discourse.get({\n      path: buildQueryString(`tags/${tag}.json`, inputs as TopicParams),\n    });\n  };\n\n  this.getTopicsByCategoryAndTag = async ({\n    tag,\n    category,\n    subcategory,\n    ...inputs\n  }: TopicParams = {}) => {\n    return discourse.get({\n      path: buildQueryString(\n        `tags/c/${category}/${subcategory ? `${subcategory}/` : ''}${tag}.json`,\n        inputs as TopicParams,\n      ),\n    });\n  };\n\n  this.deleteTopic = async ({ id, ...inputs }: { id?: number } = {}) => {\n    return discourse.delete({\n      path: buildQueryString(`t/${id}`, inputs as TopicParams),\n    });\n  };\n\n  this.createTopic = async inputs => {\n    return discourse.posts.create(inputs);\n  };\n}\n","import Discourse from '../index';\nimport { Upload } from '../types/Uploads';\n\nexport type NewUpload = {\n  'files[]': { uri: string; name: string; type: string };\n  type: string;\n  user_id?: number;\n  synchronous?: boolean;\n};\n\nexport interface IUploads {\n  create(body: NewUpload): Promise<Upload>;\n}\n\nexport default function Uploads(discourse: Discourse): void {\n  this.create = async (body: NewUpload) => {\n    return discourse.post({\n      path: 'uploads.json',\n      body,\n    });\n  };\n}\n","import Discourse from '../index';\nimport { UserProfile, UserProfileSummary } from '../types/Users';\n\nexport interface IUsers {\n  getUser(params: { username?: string }): Promise<UserProfile>;\n  getUserSummary(params: { username?: string }): Promise<UserProfileSummary>;\n}\nexport default function Users(discourse: Discourse): void {\n  this.getUser = async ({ username }: { username?: string } = {}) => {\n    return discourse\n      .get({\n        path: `users/${username}.json`,\n      })\n      .then(response => response)\n      .catch(error => error);\n  };\n\n  this.getUserSummary = async ({ username }: { username?: string } = {}) => {\n    return discourse\n      .get({\n        path: `u/${username}/summary.json`,\n      })\n      .then(response => response)\n      .catch(error => error);\n  };\n}\n","// =========\n// = humps =\n// =========\n// Underscore-to-camelCase converter (and vice versa)\n// for strings and object keys\n\n// humps is copyright Â© 2012+ Dom Christie\n// Released under the MIT license.\n\n\n;(function(global) {\n\n  var _processKeys = function(convert, obj, options) {\n    if(!_isObject(obj) || _isDate(obj) || _isRegExp(obj) || _isBoolean(obj) || _isFunction(obj)) {\n      return obj;\n    }\n\n    var output,\n        i = 0,\n        l = 0;\n\n    if(_isArray(obj)) {\n      output = [];\n      for(l=obj.length; i<l; i++) {\n        output.push(_processKeys(convert, obj[i], options));\n      }\n    }\n    else {\n      output = {};\n      for(var key in obj) {\n        if(Object.prototype.hasOwnProperty.call(obj, key)) {\n          output[convert(key, options)] = _processKeys(convert, obj[key], options);\n        }\n      }\n    }\n    return output;\n  };\n\n  // String conversion methods\n\n  var separateWords = function(string, options) {\n    options = options || {};\n    var separator = options.separator || '_';\n    var split = options.split || /(?=[A-Z])/;\n\n    return string.split(split).join(separator);\n  };\n\n  var camelize = function(string) {\n    if (_isNumerical(string)) {\n      return string;\n    }\n    string = string.replace(/[\\-_\\s]+(.)?/g, function(match, chr) {\n      return chr ? chr.toUpperCase() : '';\n    });\n    // Ensure 1st char is always lowercase\n    return string.substr(0, 1).toLowerCase() + string.substr(1);\n  };\n\n  var pascalize = function(string) {\n    var camelized = camelize(string);\n    // Ensure 1st char is always uppercase\n    return camelized.substr(0, 1).toUpperCase() + camelized.substr(1);\n  };\n\n  var decamelize = function(string, options) {\n    return separateWords(string, options).toLowerCase();\n  };\n\n  // Utilities\n  // Taken from Underscore.js\n\n  var toString = Object.prototype.toString;\n\n  var _isFunction = function(obj) {\n    return typeof(obj) === 'function';\n  };\n  var _isObject = function(obj) {\n    return obj === Object(obj);\n  };\n  var _isArray = function(obj) {\n    return toString.call(obj) == '[object Array]';\n  };\n  var _isDate = function(obj) {\n    return toString.call(obj) == '[object Date]';\n  };\n  var _isRegExp = function(obj) {\n    return toString.call(obj) == '[object RegExp]';\n  };\n  var _isBoolean = function(obj) {\n    return toString.call(obj) == '[object Boolean]';\n  };\n\n  // Performant way to determine if obj coerces to a number\n  var _isNumerical = function(obj) {\n    obj = obj - 0;\n    return obj === obj;\n  };\n\n  // Sets up function which handles processing keys\n  // allowing the convert function to be modified by a callback\n  var _processor = function(convert, options) {\n    var callback = options && 'process' in options ? options.process : options;\n\n    if(typeof(callback) !== 'function') {\n      return convert;\n    }\n\n    return function(string, options) {\n      return callback(string, convert, options);\n    }\n  };\n\n  var humps = {\n    camelize: camelize,\n    decamelize: decamelize,\n    pascalize: pascalize,\n    depascalize: decamelize,\n    camelizeKeys: function(object, options) {\n      return _processKeys(_processor(camelize, options), object);\n    },\n    decamelizeKeys: function(object, options) {\n      return _processKeys(_processor(decamelize, options), object, options);\n    },\n    pascalizeKeys: function(object, options) {\n      return _processKeys(_processor(pascalize, options), object);\n    },\n    depascalizeKeys: function () {\n      return this.decamelizeKeys.apply(this, arguments);\n    }\n  };\n\n  if (typeof define === 'function' && define.amd) {\n    define(humps);\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = humps;\n  } else {\n    global.humps = humps;\n  }\n\n})(this);\n","export enum NotificationType {\n  mentioned = 1,\n  replied,\n  quoted,\n  edited,\n  liked,\n  privateMessage,\n  invitedToPrivateMessage,\n  inviteeAccepted,\n  posted,\n  movedPost,\n  linked,\n  grantedBadge,\n  invitedToTopic,\n  custom,\n  groupMentioned,\n  groupMessageSummary,\n  watchingFirstPost,\n  topicReminder,\n  likedConsolidated,\n  postApproved,\n  codeReviewCommitApproved,\n  membershipRequestAccepted,\n  membershipRequestConsolidated,\n  bookmarkReminder,\n  reaction,\n  votesReleased,\n  eventReminder,\n  eventInvitation,\n}\n\nexport interface GroupNotification {\n  id: number;\n  userId: number;\n  // TODO: Build this out\n  notificationType:\n    | NotificationType.groupMentioned\n    | NotificationType.groupMessageSummary;\n  read: boolean;\n  createdAt: string;\n  postNumber: string | null;\n  topicId: string | null;\n  slug: string | null;\n  data: {\n    groupId: number;\n    groupName: string;\n    inboxCount: number;\n    username: string;\n  };\n}\n\nexport interface TopicNotification {\n  id: number;\n  // TODO: Build this out\n  notificationType:\n    | NotificationType.privateMessage\n    | NotificationType.posted\n    | NotificationType.replied\n    | NotificationType.liked;\n  read: boolean;\n  createdAt: string;\n  postNumber: number;\n  topicId: number;\n  fancyTitle: string;\n  slug: string;\n  data: {\n    topicTitle: string;\n    originalPostId: number;\n    originalPostType: number;\n    originalUsername: string;\n    revisionNumber: number | string;\n    displayUsername: string;\n  };\n}\n\nexport interface UnknownNotification {\n  id: number;\n  notificationType:\n    | NotificationType.watchingFirstPost\n    | NotificationType.mentioned;\n}\n\nexport interface NotificationList {\n  notifications: Array<TopicNotification | GroupNotification>;\n  seenNotificationId: number;\n  totalRowsNotifications?: number;\n  loadMoreNotifications?: string;\n}\n\nexport interface MarkNotificationRead {\n  id: number;\n}\n","import Categories, { ICategories } from './resources/Categories';\nimport Groups, { IGroups } from './resources/Groups';\nimport Messages, { IMessages } from './resources/Messages';\nimport Notifications, { INotifications } from './resources/Notifications';\nimport Posts, { IPosts } from './resources/Posts';\nimport Preferences, { IPreferences } from './resources/Preferences';\nimport Topics, { ITopics } from './resources/Topics';\nimport Uploads, { IUploads } from './resources/Uploads';\nimport Users, { IUsers } from './resources/Users';\n\nimport { buildQueryString, createBody, ApiError } from './utils';\nimport { decamelizeKeys, camelizeKeys } from 'humps';\n\nexport * from './resources/index';\nexport * from './types/index';\nexport * from './utils';\n\nconst VERSION = require('../package.json').version;\n\nconst resources = {\n  Categories,\n  Groups,\n  Messages,\n  Notifications,\n  Posts,\n  Preferences,\n  Topics,\n  Uploads,\n  Users,\n} as const;\n\ninterface RequestOptions {\n  path?: string;\n  headers?: Record<string, string>;\n  body?: Record<string, any>;\n  method?: string;\n}\n\ntype FinalRequestOptions = Omit<RequestOptions, 'body'> & {\n  body?: BodyInit;\n};\n\ninterface ConfigInterface {\n  apiKey: string | null;\n  apiUsername: string | null;\n  userApiKey?: string | null;\n  baseUrl?: string | null;\n}\n\nexport default class Discourse {\n  _BASE_URL: string;\n  _USER_API_KEY: string;\n  _API_KEY: string | null;\n  _API_USERNAME: string | null;\n  isUsingAdminAPI: string;\n  categories: ICategories;\n  groups: IGroups;\n  messages: IMessages;\n  notifications: INotifications;\n  posts: IPosts;\n  preferences: IPreferences;\n  topics: ITopics;\n  uploads: IUploads;\n  users: IUsers;\n\n  constructor(\n    userApiKey: string,\n    baseUrl: string,\n    apiKey: string | null = null,\n  ) {\n    this._BASE_URL = baseUrl;\n    this._USER_API_KEY = userApiKey;\n\n    // Admin User API\n    this._API_KEY = apiKey;\n\n    let resource: keyof typeof resources;\n    for (resource in resources) {\n      this[resource.toLowerCase()] = new resources[resource](this);\n    }\n  }\n\n  config = (\n    { userApiKey, baseUrl, apiUsername, apiKey }: ConfigInterface = {\n      apiUsername: null,\n      apiKey: null,\n    },\n  ): void => {\n    this._USER_API_KEY = userApiKey;\n    this._BASE_URL = baseUrl;\n\n    // Admin User API\n    this._API_KEY = apiKey;\n    this._API_USERNAME = apiUsername;\n\n    // If we are using the Admin API then we'll need to include\n    // the API key and username in each request either as part\n    // of our URL params or as part of our POST body\n    this.isUsingAdminAPI = this._API_KEY && this._API_USERNAME;\n  };\n\n  requestHeaders(): Record<string, string> {\n    return {\n      'User-Agent': `DiscourseJS ${VERSION}`,\n      ...(this._USER_API_KEY ? { 'User-Api-Key': this._USER_API_KEY } : {}),\n    };\n  }\n\n  createBody = (body: Record<string, string | number | Blob>): FormData => {\n    return this.isUsingAdminAPI\n      ? createBody({\n          ...body,\n          api_key: this._API_KEY,\n          api_username: this._API_USERNAME,\n        })\n      : createBody(body);\n  };\n\n  get = ({ path, headers }: RequestOptions = {}): Promise<any> => {\n    return this.request({\n      method: 'GET',\n      headers,\n      path: this.isUsingAdminAPI\n        ? buildQueryString(path, {\n            api_key: this._API_KEY,\n            api_username: this._API_USERNAME,\n          })\n        : path,\n    });\n  };\n\n  post = ({ path, headers, body }: RequestOptions): Promise<any> => {\n    return this.request({\n      method: 'POST',\n      headers,\n      path,\n      body: this.createBody(body),\n    });\n  };\n\n  put({ path, headers, body }: RequestOptions): Promise<any> {\n    return this.request({\n      method: 'PUT',\n      headers,\n      path,\n      body: this.createBody(body),\n    });\n  }\n\n  delete({ path, headers, body }: RequestOptions): Promise<any> {\n    return this.request({\n      method: 'DELETE',\n      headers,\n      path,\n      body: this.createBody(body),\n    });\n  }\n\n  request = (options: FinalRequestOptions): Promise<any> => {\n    const { body, method, path, headers } = options;\n\n    const fetchOptions = {\n      method,\n      headers: {\n        ...this.requestHeaders(),\n        ...headers,\n      },\n      body,\n      mimeType: 'multipart/form-data',\n    };\n\n    return fetch(`${this._BASE_URL}/${path}`, fetchOptions)\n      .then(response => {\n        const contentType = response.headers.get('content-type');\n        if (response.ok) {\n          if (contentType && contentType.indexOf('application/json') !== -1) {\n            return response.json().then(camelizeKeys);\n          } else {\n            /**\n             * If our response is OK but is not json\n             * just resolve with response.text().\n             * This happens when we DELETE a topic\n             * because nothing is returned from the request.\n             */\n            return response.text();\n          }\n        } else {\n          const { status, statusText } = response;\n          if (contentType && contentType.indexOf('application/json') !== -1) {\n            return response.json().then(json => {\n              throw new ApiError(status, statusText, '', json.errors);\n            });\n          } else {\n            return response.text().then(text => {\n              throw new ApiError(status, statusText, text);\n            });\n          }\n        }\n      })\n      .catch(error => {\n        if (error instanceof ApiError) throw error;\n        throw new Error(error);\n      });\n  };\n}\n"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","TypeError","pop","push","PostActions","global","_processKeys","convert","obj","options","_isObject","_isDate","_isRegExp","_isBoolean","_isFunction","output","l","_isArray","key","separateWords","string","separator","split","join","camelize","_isNumerical","replace","match","chr","toUpperCase","substr","toLowerCase","pascalize","camelized","decamelize","toString","_processor","callback","process","humps","depascalize","camelizeKeys","object","decamelizeKeys","pascalizeKeys","depascalizeKeys","module","exports","this","NotificationType"],"mappings":"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"}